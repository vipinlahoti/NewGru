<template name="question_page">
  {{#if ready}}
    {{#if question}}
      {{#with question}}
        {{#if canView}}
          <!-- Question page header -->
          <div class="page-header">
            <div class="container">
              <div class="row">
                <div class="col-md-8">
                  <div class="card"> 
                    {{> modules zone="questionSingleHeading" zoneClass="question-heading" moduleData=this}}
                    {{> modules zone="questionMeta" zoneClass="card-footer" moduleData=this}}
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="main z-depth-2">
            <div class="container">
              <div class="row">
                <div class="col-md-8 col-md-offset-2">
                  <!-- Question Approval message -->
                  {{#if isPending}}
                    <div class="error pending-message module">
                      Thanks your question is awaiting approval
                    </div>
                  {{/if}}
                  
                  <!-- Markdown question body -->
                  {{#if body}}
                    {{> question_body}}
                  {{/if}}
                  {{#if referenceImage}}
                    <div class="card card-single no-padding">
                      <div class="card-image">
                        <img src="{{referenceImage}}" alt="{{body}}" />
                      </div>
                    </div>
                  {{/if}}
                </div>
              </div>
              <div class="section-answers">
                <div class="row">
                  <div class="col-md-8 col-md-offset-2">
                    <div class="media-area">
                      <!-- answers node list -->
                      <h3 class="title center-align">{{answerCount}} Answers</h3>
                      {{> answer_list}}

                      <!-- Answer form -->
                      {{> answer_submit}}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{else}}
          <!-- Not authorised to view question -->
          {{> no_rights}}
        {{/if}}
      {{/with}}
    {{else}}
      <!-- Question not found -->
      {{> not_found}}
    {{/if}}
  {{else}}
    <div class="questions-loading">{{> loading}}</div>
  {{/if}}
</template>
